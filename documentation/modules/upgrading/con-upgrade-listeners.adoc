// This module is included in the following assemblies:
//
// upgrading/assembly_upgrade-kafka-versions.adoc

[id='con-upgrade-listeners-{context}']
= Updating listener configuration

Strimzi provides a `GenericKafkaListener` schema for the configuration of Kafka listeners in a `Kafka` resource.

`GenericKafkaListener` replaces the `KafkaListeners` schema, which is deprecated.

The `GenericKafkaListener` schema is backwards compatible.

With the `GenericKafkaListener` schema, you can configure as many listeners as required,
as long as their names and ports are unique.
The listener configuration is defined as an array.

For clients inside the Kubernetes cluster, you can create `plain` (without encryption) or `tls` _internal_ listeners.

For clients outside the Kubernetes cluster, you create _external_ listeners and specify a connection mechanism,
which can be `nodeport`, `loadbalancer`, `ingress` or `route`.

The `KafkaListeners` schema uses sub-properties for `plain`, `tls` and `external` listeners, with fixed ports for each.
As part of your upgrade, you can convert listeners configured using the `KafkaListeners` schema into the format of the `GenericKafkaListener` schema.

For example, if you are currently using the following configuration in your `Kafka` configuration:

[source,shell,subs="+quotes,attributes"]
----
listeners:
  plain:
    # ...
  tls:
    # ...
  external:
    type: loadbalancer
    # ...
----

Convert the listeners into the new format using:

[source,shell,subs="+quotes,attributes"]
----
listeners:
  #...
  - name: plain
    port: 9092
    type: internal
    tls: false
  - name: tls
    port: 9093
    type: internal
    tls: true
  - name: external
    port: 9094
    type: _EXTERNAL-LISTENER-TYPE_ <1>
    tls: true
# ...
----
<1> Options: `ingress`, `loadbalancer`, `nodeport`, `route`

For more information on the configuration options available for each type of listener,
see the link:{BookURLUsing}#type-GenericKafkaListener-reference[`GenericKafkaListener` schema reference].
