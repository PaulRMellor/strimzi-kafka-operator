// Module included in the following assemblies:
//
// assembly-oauth.adoc

[id='con-oauth-authentication-flow-{context}']
= {oauth} authentication mechanism

Support for {oauth} is based on the Kafka _SASL OAUTHBEARER_ mechanism, which is used to establish authenticated sessions with a Kafka broker.

A Kafka client initiates a session with the Kafka broker using the _SASL OAUTHBEARER_ mechanism for credentials exchange.

For {oauth}, credentials are exchanged in the form of an access token.

Kafka brokers and clients need to be configured to support {oauth}.

.Kafka broker configuration
The Kafka broker must be configured to validate the token received during session initiation.
The recommended approach is to create and configure a _client_ for the Kafka broker in an authorization server with:

* An ID of `kafka-broker`
* Client ID and secret for authentication

.Kafka client configuration
Kafka clients also use a client ID and secret for authentication, but they can also employ more complex mechanisms for authenticating.

For example, authentication might involve generating and packaging a long-lived refresh token with a deployment of a Kafka client application.
Or an access token might be generated that entirely obviates the need for the Kafka client application to contact an authorization server during Kafka session initiation.

NOTE: If you are using long-lived access tokens, configure _realm_ policy settings in the authorization server to increase the maximum lifetime of the token.

If the Kafka client is not configured with an access token directly, the client exchanges credentials for an access token during Kafka session initiation by contacting the authorization server.
The Kafka client uses one of two mechanisms:

* Client id and secret
* Client id, refresh token and (optionally) a secret
